# 什么是封装

封装是面向对象编程的三大特性之一（封装、继承、多态），它指的是将对象的状态（属性）和行为（方法）包装在一起，并对外部隐藏对象的内部实现细节，只对外提供公开的接口。

# 封装的实现方式

在 Java 中，封装主要通过以下方式实现：

## 1. 使用访问修饰符

通过使用访问修饰符（private、default、protected、public）来控制类成员的访问权限，通常将成员变量设置为 private，将成员方法设置为 public（或其他适当的访问级别）。

## 2. 提供 getter 和 setter 方法

为 private 成员变量提供 public 的 getter 和 setter 方法，用于访问和修改成员变量的值。

# 封装的示例

```java
// 封装的示例
public class Person {
    // 私有成员变量
    private String name;
    private int age;
    private String address;

    // 构造方法
    public Person() {
    }

    public Person(String name, int age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }

    // Getter方法
    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

    public String getAddress() {
        return address;
    }

    // Setter方法
    public void setName(String name) {
        this.name = name;
    }

    public void setAge(int age) {
        // 可以在setter方法中添加验证逻辑
        if (age >= 0 && age <= 150) {
            this.age = age;
        } else {
            System.out.println("年龄必须在0-150之间");
        }
    }

    public void setAddress(String address) {
        this.address = address;
    }

    // 公开方法
    public void introduce() {
        System.out.println("我叫" + name + "，今年" + age + "岁，住在" + address);
    }
}
```

# 封装的优点

## 1. 隐藏实现细节

封装可以隐藏对象的内部实现细节，只对外提供必要的接口，使得代码更加安全。

## 2. 提高代码的可维护性

通过封装，当需要修改对象的内部实现时，只要保持公开接口不变，就不会影响到其他使用该对象的代码。

## 3. 实现数据验证

在 setter 方法中可以添加数据验证逻辑，确保数据的合法性。

## 4. 控制访问权限

通过访问修饰符，可以精确控制哪些成员可以被外部访问，哪些成员只能在类内部使用。

# 封装的最佳实践

## 1. 成员变量私有化

将所有成员变量设置为 private，避免外部直接访问和修改。

## 2. 提供公共的访问方法

为需要被外部访问的成员变量提供 public 的 getter 和 setter 方法。

## 3. 在 setter 方法中添加验证逻辑

在 setter 方法中添加数据验证，确保数据的合法性。

## 4. 合理使用访问修饰符

根据需要选择合适的访问修饰符，遵循最小权限原则。

# 封装的应用场景

## 1. 实体类

在创建实体类时，通常会将成员变量私有化，并提供 getter 和 setter 方法。

## 2. 工具类

在创建工具类时，通常会将构造方法私有化，只提供静态方法供外部使用。

## 3. 单例模式

在实现单例模式时，通常会将构造方法私有化，通过静态方法获取唯一的实例。

# 示例代码

## 完整的封装示例

```java
// 封装的完整示例
public class Student {
    // 私有成员变量
    private String id;
    private String name;
    private int score;

    // 构造方法
    public Student(String id, String name, int score) {
        this.id = id;
        this.name = name;
        this.score = score;
    }

    // Getter方法
    public String getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public int getScore() {
        return score;
    }

    // Setter方法
    public void setId(String id) {
        this.id = id;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setScore(int score) {
        // 分数验证
        if (score >= 0 && score <= 100) {
            this.score = score;
        } else {
            System.out.println("分数必须在0-100之间");
        }
    }

    // 公开方法
    public String getGrade() {
        if (score >= 90) {
            return "A";
        } else if (score >= 80) {
            return "B";
        } else if (score >= 70) {
            return "C";
        } else if (score >= 60) {
            return "D";
        } else {
            return "F";
        }
    }

    public void displayInfo() {
        System.out.println("ID: " + id);
        System.out.println("Name: " + name);
        System.out.println("Score: " + score);
        System.out.println("Grade: " + getGrade());
    }
}

// 使用封装的类
public class StudentTest {
    public static void main(String[] args) {
        // 创建学生对象
        Student student = new Student("S001", "Alice", 85);

        // 显示学生信息
        student.displayInfo();

        // 修改学生分数
        student.setScore(95);
        System.out.println("\n修改分数后:");
        student.displayInfo();

        // 尝试设置无效分数
        System.out.println("\n尝试设置无效分数:");
        student.setScore(120);
        student.displayInfo();
    }
}
```

# 总结

封装是面向对象编程的重要特性，它通过隐藏对象的内部实现细节，只对外提供公开的接口，提高了代码的安全性、可维护性和可扩展性。在 Java 中，封装主要通过使用访问修饰符和提供 getter/setter 方法来实现。

合理使用封装可以使代码更加清晰、健壮，减少代码之间的耦合度，提高代码的复用性。
